(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{15:function(e,t,n){},16:function(e,t,n){},17:function(e,t,n){"use strict";n.r(t);var a=n(0),s=n.n(a),r=n(8),i=n.n(r),o=(n(15),n(1)),c=n(2),u=n(5),l=n(3),m=n(4),h=n(6),g=(n(16),function(e){function t(){return Object(o.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.users.map(function(e){return s.a.createElement("li",{key:e},s.a.createElement("div",{className:"user"},s.a.createElement("span",{className:"username"},e)))});return s.a.createElement("ul",{className:"user-list"},e)}}]),t}(a.Component)),p=function(e){function t(){return Object(o.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=this.props.messages.map(function(t,n){return s.a.createElement("li",{key:n,className:" ".concat(e.props.loginUser===t.sender?"active":"")},s.a.createElement("div",{className:"message"},s.a.createElement("div",{className:"meta-info"},s.a.createElement("div",{className:"sender-info"},s.a.createElement("span",{className:"username"},t.sender)),s.a.createElement("div",{className:"message-info"},s.a.createElement("span",{className:"timestamp"},t.timestamp))),s.a.createElement("p",{className:"message-text"},t.text)))});return s.a.createElement("ul",{className:"message-list"},t)}}]),t}(a.Component),d=function(e){function t(){return Object(o.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"to-send-form"},s.a.createElement("input",{type:"hidden",name:"username",value:this.props.loginUser}),s.a.createElement("input",{className:"to-send",name:"text",placeholder:"Type your message",onChange:this.props.onUpdateMessage,value:this.props.inputText,autonfocus:"true"}),s.a.createElement("button",{type:"submit",disabled:""===this.props.inputText,onClick:this.props.onSubmit},"Submit"))}}]),t}(a.Component),b=function(e){function t(){return Object(o.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"error"},s.a.createElement("p",null,this.props.errMsg))}}]),t}(a.Component),f=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(u.a)(this,Object(l.a)(t).call(this,e))).state={username:""},n.handleChange=n.handleChange.bind(Object(h.a)(Object(h.a)(n))),n}return Object(m.a)(t,e),Object(c.a)(t,[{key:"handleChange",value:function(e){this.setState({username:e.target.value})}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"login-panel"},s.a.createElement("label",null,"NAME"),s.a.createElement("input",{type:"text",name:"username",placeholder:"Please enter your name",value:this.state.username,onChange:this.handleChange}),s.a.createElement("button",{type:"submit",disabled:""===this.state.username,onClick:function(t){return e.props.onLogin(e.state.username,t)}},"Login"))}}]),t}(a.Component),j=function(e){function t(){return Object(o.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"navbar"},s.a.createElement("span",{className:"greeting"},"Welcome, ",this.props.loginUser),s.a.createElement("button",{type:"submit",className:"logout",onClick:this.props.onLogout},"Logout"))}}]),t}(a.Component),v=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(u.a)(this,Object(l.a)(t).call(this,e))).state={messages:[],users:[],inputText:"",loginUser:"",errorMessage:"",isLoginPage:!0},n.changeMessage=n.changeMessage.bind(Object(h.a)(Object(h.a)(n))),n.handleSubmit=n.handleSubmit.bind(Object(h.a)(Object(h.a)(n))),n.handleLogin=n.handleLogin.bind(Object(h.a)(Object(h.a)(n))),n.handleLogout=n.handleLogout.bind(Object(h.a)(Object(h.a)(n))),n}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.timer=setInterval(function(){fetch("/chat",{method:"GET"}).then(function(e){return e.ok?e.json():Promise.reject({error:"service-error",err:e.statusText})}).then(function(t){e.setState({messages:t.messages,users:t.users,errorMessage:""})}).catch(function(t){return e.setState({errorMessage:t})})},1e3)}},{key:"componentWillUnmount",value:function(){clearInterval(this.timer)}},{key:"changeMessage",value:function(e){this.setState({inputText:e.target.value})}},{key:"handleSubmit",value:function(){var e,t,n=this;(e=this.state.loginUser,t=this.state.inputText,fetch("/chat",{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({sender:e,message:t})}).then(function(e){return e.ok?e.json():Promise.reject({error:"service-error",err:e.statusText})})).then(function(e){n.setState({messages:e.messages,inputText:"",errorMessage:""})}).catch(function(e){return n.setState({errorMessage:e})})}},{key:"handleLogin",value:function(e){var t=this;(function(e){return fetch("/login",{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({loginuser:e})}).then(function(e){return e.ok?e.json():Promise.reject({error:"service-error",err:e.statusText})})})(e).then(function(n){t.setState({loginUser:e,isLoginPage:!1,users:n.users,messages:n.messages,errorMessage:""})}).catch(function(e){return t.setState({errorMessage:e})})}},{key:"handleLogout",value:function(){var e,t=this;(e=this.state.loginUser,fetch("/logout",{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({loginuser:e})}).then(function(e){return e.ok?e.json():Promise.reject({error:"service-error",err:e.statusText})})).then(function(e){t.setState({loginUser:"",isLoginPage:!0,errorMessage:""})}).catch(function(e){return t.setState({errorMessage:e})})}},{key:"render",value:function(){return this.state.isLoginPage?s.a.createElement("div",{className:"login-page"},s.a.createElement(f,{onLogin:this.handleLogin})):s.a.createElement("div",{className:"chat-app"},s.a.createElement("div",{className:"chat-page"},s.a.createElement(j,{loginUser:this.state.loginUser,onLogout:this.handleLogout}),s.a.createElement("div",{className:"display-panel"},s.a.createElement(g,{users:this.state.users}),s.a.createElement(p,{messages:this.state.messages,loginUser:this.state.loginUser})),s.a.createElement(d,{inputText:this.state.inputText,onUpdateMessage:this.changeMessage,onSubmit:this.handleSubmit}),s.a.createElement(b,{errMsg:this.state.ErrorMessage})))}}]),t}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(s.a.createElement(v,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},9:function(e,t,n){e.exports=n(17)}},[[9,1,2]]]);
//# sourceMappingURL=main.9927d03d.chunk.js.map